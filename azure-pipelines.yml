# Docker
# Build a Docker image
# https://docs.microsoft.com/azure/devops/pipelines/languages/docker

trigger:
- master

pool:
  vmImage: ubuntu-latest

steps:
- task: Maven@3
  inputs:
    mavenPomFile: 'pom.xml'
    goals: 'package'
    publishJUnitResults: true
    testResultsFiles: '**/surefire-reports/TEST-*.xml'
    javaHomeOption: 'JDKVersion'
    jdkVersionOption: '1.8'
    mavenVersionOption: 'Default'
    mavenAuthenticateFeed: false
    effectivePomSkip: false
    sonarQubeRunAnalysis: false

- task: AzureRmWebAppDeployment@4
  inputs:
          ConnectionType: 'AzureRM'
          azureSubscription: 'Azure subscription 1(eea5b4fd-8b0c-433c-b02b-555e85f3ccc7)'
          appType: 'webApp'
          WebAppName: 'web-app-shopping-cart'
          packageForLinux: '$(System.DefaultWorkingDirectory)/**/*.zip'
      